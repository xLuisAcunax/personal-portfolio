---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('projects');
  return entries.map((entry) => ({ params: { slug: entry.slug }, props: { entry } }));
}

const { entry } = Astro.props;
const { title, summary, cover, stack } = entry.data;
---
<Layout title={`${title} — Proyecto`} description={summary}>
  <section class="mx-auto max-w-3xl px-6 py-16">
    <a href="/" class="opacity-80 hover:opacity-100">← Volver</a>
    <h1 class="mt-4 text-3xl font-semibold">{title}</h1>
    <p class="opacity-80 mt-2">{summary}</p>
    {cover && <img src={cover} alt={title} class="mt-6 rounded-xl" />}
    <div class="mt-4 flex flex-wrap gap-2 text-xs opacity-70">
      {stack.map(t => <span class="px-2 py-0.5 rounded-full border border-neutral-800">{t}</span>)}
    </div>
    <article class="mt-8 leading-7 opacity-90" set:html={entry.body}></article>
  </section>
</Layout>